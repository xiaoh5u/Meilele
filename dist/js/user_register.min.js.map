{"version":3,"sources":["user_register.js"],"names":["check","reg","value","ele","error","target","hide","$","attr","removeClass","use","layer","layui","addClass","oInputs","document","querySelectorAll","sourceArr","i","randomColor","String","fromCharCode","Math","round","random","b","rgb","push","n","randomNum","floor","length","html","css","on","e","ev","event","srcElement","val","id","RegExp","str","toUpperCase","res","url","type","dataType","beforeSend","getAttribute","sum","ajax","code","msg","data","time","load","then","_ref","icon","close","index","location","href","codeN"],"mappings":"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","file":"user_register.min.js","sourcesContent":["$('.registerBox').on('input', function (e) {\r\n    var ev = event || e;\r\n    var target = ev.target || ev.srcElement\r\n\r\n    if (target.id === 'username') {\r\n        check(/^[a-zA-Z_\\u4e00-\\u9fa5][\\w\\u4e00-\\u9fa5]{3,19}$/, $(target).val(), '.userName i',\r\n            '.username_p', target)\r\n    }\r\n    if (target.id === 'password') {\r\n        check(/(?![A-Z]+$)(?![a-z]+$)(?!\\d+$)\\S{6,19}$/, $(target).val(), '.userPwd i', '.password_p',\r\n            target)\r\n\r\n        //******************************\r\n        // 重新输入密码时重置confirm状态\r\n        $('#confirm').val('').removeClass('error')\r\n        $('.pwdConfirm i').css('display', 'none')\r\n        $('.confirm_p').hide().removeClass('error')\r\n        //******************************\r\n    }\r\n    if (target.id === 'confirm') {\r\n\r\n        //密码框内有内容时进行以下验证\r\n        if ($('#password').val()) {\r\n            check(new RegExp('^' + $('#password').val() + '$'), $(target).val(), '.pwdConfirm i',\r\n                '.confirm_p',\r\n                target)\r\n        }\r\n\r\n    }\r\n\r\n    if (target.id === 'telephone') {\r\n        check(/^[1]\\d{10}$/, $(target).val(), '.telePhone i', '.telephone_p', target)\r\n\r\n    }\r\n    if (target.id === 'input_code') {\r\n        var str = ''\r\n        for (var i = 0; i < 4; i++) {\r\n            str += $(`#code_num>span:eq(${i})`).html()\r\n        }\r\n        check(new RegExp('^' + str.toUpperCase() + '$'), $(target).val().toUpperCase(),\r\n            '.code i',\r\n            '.code em',\r\n            target)\r\n    }\r\n\r\n})\r\n\r\n\r\n//正则判断\r\nfunction check(reg, value, ele, error, target) {\r\n    var res = reg.test(value);\r\n    if (res) {\r\n        //正确\r\n        $(ele).css('display', 'inline-block')\r\n        $(error).hide().removeClass('error')\r\n        $(target).removeClass('error')\r\n        $(target).attr('check_num', '1')\r\n    } else {\r\n        //错误\r\n        $(ele).hide()\r\n        $(error).css('display', 'inline-block').addClass('error')\r\n        $(target).addClass('error')\r\n        $(target).attr('check_num', '0')\r\n        //字体图标不需要error\r\n        $('.code em').removeClass('error')\r\n    }\r\n}\r\n\r\n\r\n\r\nlayui.use('layer', function () {\r\n    var layer = layui.layer;\r\n});\r\n\r\n\r\n\r\n$('#button').on('click', function () {\r\n    var oInputs = document.querySelectorAll('.registerBox input')\r\n    var sum = 0;\r\n    //**********************************************\r\n    //在以上代码判断时 添加一个check_num,\r\n    //正确为1，错误为0，点击注册时相加，不为5时弹提示框\r\n    //**********************************************\r\n    for (var i = 0; i < oInputs.length - 1; i++) {\r\n        sum += oInputs[i].getAttribute('check_num') * 1\r\n    }\r\n    if (sum === 5) {\r\n        //验证通过\r\n        $.ajax({\r\n            url: 'http://localhost/php/project_php/user_register.php',\r\n            type: 'post',\r\n            dataType: 'json',\r\n            data: {\r\n                username: $('#username').val(),\r\n                password: $('#password').val(),\r\n                telephone: $('#telephone').val()\r\n            },\r\n            beforeSend: (function () {\r\n                    var index = layer.load();\r\n            })\r\n\r\n        }).then(({\r\n            code,\r\n            msg,\r\n            data\r\n        }) => {\r\n            layer.close(layer.index);\r\n            if (code) {\r\n                layer.msg(msg, {\r\n                    icon: 1,\r\n                    time: 2000\r\n                }, function () {\r\n                    location.href = '/dist/html/user_login.html'\r\n                });\r\n            } else {\r\n                layer.msg(msg, {\r\n                    icon: 2\r\n                });\r\n            }\r\n        })\r\n\r\n\r\n    } else {\r\n            layer.msg('输入有误', function () {});\r\n    }\r\n})\r\n\r\n\r\n// **********************************************************\r\n//虚拟验证码\r\n$('#code_num').on('click', function () {\r\n    codeN(4)\r\n})\r\ncodeN(4)\r\n\r\nfunction codeN(n) {\r\n    var code = '';\r\n    var sourceArr = [];\r\n\r\n    for (var i = 48; i <= 57; i++) {\r\n        sourceArr.push(String.fromCharCode(i))\r\n    }\r\n    for (var i = 97; i <= 122; i++) {\r\n        sourceArr.push(String.fromCharCode(i))\r\n    }\r\n    for (var i = 65; i <= 90; i++) {\r\n        sourceArr.push(String.fromCharCode(i))\r\n    }\r\n\r\n    for (var i = 0; i < n; i++) {\r\n        var randomNum = sourceArr[Math.floor(Math.random() * sourceArr.length)]\r\n        $(`#code_num>span:eq(${i})`).html(randomNum).css('color', randomColor())\r\n    }\r\n    return code;\r\n\r\n}\r\n\r\nfunction randomColor() {\r\n    var r = Math.round(Math.random() * 255)\r\n    var g = Math.round(Math.random() * 255)\r\n    var b = Math.round(Math.random() * 255)\r\n    var rgb = 'rgb' + '(' + r + ',' + g + ',' + b + ')'\r\n    return rgb\r\n}"]}